# Rails

## bundle install
gemをインストールする

## rails new [dir]
dirにrailsのプロジェクト(テンプレート)を作成する

## rails generate controller [controller name] [Action ...]
引数に指定したコントローラーとアクションを生成する
generateはコントローラー以外も生成できる

## rails destroy controller [controller name] [Action ...]
- 引数に指定したコントローラーとアクションを削除する
- 生成されたファイルだけでなく、変更されたファイルも元にもどす
- generateで作成したものをコントローラー以外も削除できる

## config/routes.rb

```
get 'static_pages/home'
```
`/static_pages/home`をstatic_pagesコントローラーのhomeアクションと結びつける

## app/controllers
- コントローラーに定義されているアクションは、rubyのメソッド
- コントローラーに定義されているアクションは内容が空でも、ApplicationControllerを継承していることで処理が行われる
- ページにアクセスすると、コントローラーを参照し、コントローラー内のアクションを実行して、Viewを出力する

## テスト
- アプリケーテョンを開発しながら、テストをしっかり作成しておけば、セーフティーネットになり「実行可能なドキュメント」にもなる。
- テストを作成するということは余分なコードを書くことになるが、テストが揃っていれば、バグを追うために余分な時間を使わずに済むため、テストがない場合より開発速度がアップする。  
`一度でもテスト作成が上達すれば間違いなくこのとおりになります。`

- テストのメリット
  1. テストが揃っていれば、機能停止に陥るような回帰バグ(Regression Bug)を防止できる。
  2. テストが揃っていれば、コードを安全にリファクタリングできる。
  3. テストコードは、アプリケーションコードから見ればクライアントとして動作するので、アプリケーションの設計やシステムの他の部分とのインターフェイスを決めるときにも役に立つ。

テストをすらすらかけるようになると、大抵の開発者はテストを先に書くようになるらしい

- ガイドライン
  - アプリケーションのコードより明らかにテストコードが短くシンプルになる(=かんたんにかける)のであれば「先に」書く
  - 動作の仕様がまだ固まりきっていない場合、アプリケーションのコードを先に書き、期待する動作を「後で」書く
  - セキュリティが重要な課題またはセキュリティ周りのエラーが発生した場合、テストを「先に」書く
  - バグを見つけたら、そのバグを再現するテストを「先に」書き、回帰バグを防ぐ体制を整えてから修正に取りかかる
  - すぐにまた変更しそうなコード (HTML構造の細部など) に対するテストは「後で」書く
  - リファクタリングするときは「先に」テストを書く。特に、エラーを起こしそうなコードや止まってしまいそうなコードを集中的にテストする

## test/controllers
rails generate controllerで生成される

```Ruby
test "should get home" do
  get static_pages_home_url
  assert_response :success
end
```
「Homeページのテスト。GETリクエストをhomeアクションに対して発行 (=送信) せよ。そうすれば、リクエストに対するレスポンスは[成功]になるはず」

```
rails test
```
でテストを実行する